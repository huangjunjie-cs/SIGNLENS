<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>sign_lens.utils - SIGNLENS 0.post1+gb0c0325 documentation</title>
    <link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" />
  <script>
    const isDarkTheme = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    const sessionTheme = sessionStorage['_theme']
    if (sessionTheme) {
      document.documentElement.classList.add(sessionTheme)
    } else if (isDarkTheme) {
      document.documentElement.classList.add('dark')
    }
  </script><link rel="stylesheet" href="../../_static/pygments.css?v=2023.3.19" type="text/css" />
    <link rel="stylesheet" href="../../_static/shibuya.css?v=2023.3.19" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sxgnn.css" />
    <link media="print" rel="stylesheet" type="text/css" href="../../_static/print.css?v=2023.3.19" />
    <style>
:root {
  --sy-f-sys:-apple-system, BlinkMacSystemFont, Segoe UI, Oxygen, Ubuntu, Droid Sans, Helvetica Neue;--sy-f-cjk:PingFang SC, Hiragino Sans GB, Droid Sans Fallback, Microsoft YaHei;--sy-f-heading:var(--sy-f-sys), var(--sy-f-cjk), sans-serif;--sy-f-text:var(--sy-f-sys), var(--sy-f-cjk), sans-serif;--sy-f-mono:Menlo, Monaco, Consolas, "Courier New", monospace;--sy-c-divider:rgba(var(--sy-rc-text), 0.1);--sy-c-divider-weak:rgba(var(--sy-rc-text), 0.05);--sy-c-border:rgba(var(--sy-rc-text), 0.14);--sy-s-banner-height:0rem;--sy-s-navbar-height:4rem;--sy-s-offset-top:calc(var(--sy-s-navbar-height) + var(--sy-s-banner-height));--sy-c-link:rgb(var(--sy-rc-theme));
  --sy-rc-theme:143, 118, 214;--sy-rc-bg:255, 255, 255;--sy-rc-invert:0, 0, 0;--sy-rc-text:0, 0, 0;--sy-c-bg:#fff;--sy-c-bg-weak:#f9f9f9;--sy-c-text:#374151;--sy-c-text-weak:#6b7280;--sy-c-heading:#111827;--sy-c-bold:#111827;--sy-c-foot-text:#232226;--sy-c-foot-bg:#fafafa;--sy-c-foot-divider:#f0f0f0;
}
@media (prefers-color-scheme: light) {
  :root {
    --sy-rc-theme:143, 118, 214;--sy-rc-bg:255, 255, 255;--sy-rc-invert:0, 0, 0;--sy-rc-text:0, 0, 0;--sy-c-bg:#fff;--sy-c-bg-weak:#f9f9f9;--sy-c-text:#374151;--sy-c-text-weak:#6b7280;--sy-c-heading:#111827;--sy-c-bold:#111827;--sy-c-foot-text:#232226;--sy-c-foot-bg:#fafafa;--sy-c-foot-divider:#f0f0f0;
  }
}
@media (prefers-color-scheme: dark) {
  :root {
    --sy-rc-theme:143, 118, 214;--sy-rc-bg:18, 18, 18;--sy-rc-invert:255, 255, 255;--sy-rc-text:255, 255, 255;--sy-c-bg:#121212;--sy-c-bg-weak:#212833;--sy-c-text:#cedbea;--sy-c-text-weak:#77889f;--sy-c-heading:#ebf0f4;--sy-c-bold:#ebf0f4;--sy-c-foot-text:#eee;--sy-c-foot-bg:#000;--sy-c-foot-divider:#000;
  }
}
html.light {
  --sy-rc-theme:143, 118, 214;--sy-rc-bg:255, 255, 255;--sy-rc-invert:0, 0, 0;--sy-rc-text:0, 0, 0;--sy-c-bg:#fff;--sy-c-bg-weak:#f9f9f9;--sy-c-text:#374151;--sy-c-text-weak:#6b7280;--sy-c-heading:#111827;--sy-c-bold:#111827;--sy-c-foot-text:#232226;--sy-c-foot-bg:#fafafa;--sy-c-foot-divider:#f0f0f0;
}
html.dark {
  --sy-rc-theme:143, 118, 214;--sy-rc-bg:18, 18, 18;--sy-rc-invert:255, 255, 255;--sy-rc-text:255, 255, 255;--sy-c-bg:#121212;--sy-c-bg-weak:#212833;--sy-c-text:#cedbea;--sy-c-text-weak:#77889f;--sy-c-heading:#ebf0f4;--sy-c-bold:#ebf0f4;--sy-c-foot-text:#eee;--sy-c-foot-bg:#000;--sy-c-foot-divider:#000;
}
</style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --sy-f-heading: Inter, var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
}
</style>
    <meta property="og:type" content="website"/><meta property="og:title" content="sign_lens.utils"/>
<meta name="twitter:card" content="summary"/></head>
<body><div class="document"><div class="sy-head">
  <div class="sy-head-blur"></div>
  <div class="sy-head-inner sy-container mx-auto">
    <div class="sy-head-brand flex items-center">
      <div class="md:hidden flex items-center">
        <button class="hamburger js-menu mr-3" aria-label="Menu" type="button" aria-controls="lside" aria-expanded="false">
          <span class="hamburger_1"></span>
          <span class="hamburger_2 -translate-x-2"></span>
          <span class="hamburger_3 -translate-x-1"></span>
        </button>
      </div>
      <a href="../../index.html">
        
        
        <strong>SIGNLENS</strong>
      </a>
      
    </div>
    <div class="sy-head-actions flex gap-2 items-center print:hidden">
      <nav class="sy-head-nav hidden md:block">
      </nav>
      <div class="hidden md:block"><form class="searchbox flex items-center" action="../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <kbd>/</kbd>
</form>
      </div>
      <button class="js-theme theme-switch flex items-center ml-1" data-aria-light="Switch to dark mode" data-aria-dark="Switch to light mode">
        <i class="i-icon theme-icon"></i>
      </button>
      
    </div>
  </div>
</div>
<div class="sy-page sy-container flex mx-auto">
  <aside id="lside" class="sy-lside md:w-64 md:shrink-0 print:hidden">
    <div class="sy-lside-inner md:sticky">
      <div class="md:hidden pt-6 px-6"><form class="searchbox flex items-center" action="../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <button>Go</button>
</form>
      </div>
      <div class="md:hidden pt-3 px-6">
      </div>
      <div class="sy-scrollbar p-6">
        <div class="globaltoc">
          <p class="caption" role="heading"><span class="caption-text">Home</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../preliminary.html">Preliminary for Signed Networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../math_reference.html">Spectral Theory for Signed Networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../application.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api.html">API</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../release-history.html">Release History</a></li>
</ul>

        </div>
      </div>
    </div>
  </aside>
  <aside id="rside" class="sy-rside pb-3 w-64 shrink-0 order-last">
    <button class="rside-close js-menu xl:hidden" aria-label="Close Table of Contents" type="button" aria-controls="rside" aria-expanded="false">
      <i class="i-icon close"></i>
    </button>
    <div class="sy-scrollbar px-6 xl:top-16 xl:sticky xl:pl-0 pt-6 pb-4"><div id="ethical-ad-placement"></div>
    </div>
  </aside>
  <div class="rside-overlay js-menu" role="button" aria-label="Close Table of Contents" aria-controls="rside" aria-expanded="false"></div>
  <main class="sy-main w-full max-sm:max-w-full print:pt-6">
    <div class="flex flex-col break-words justify-between">
      <div class="min-w-0 max-w-6xl px-6 pb-6 pt-6 xl:px-12">
        <article class="yue" role="main">
          <h1>Source code for sign_lens.utils</h1><div class="highlight"><pre>
<span></span><span id="1-1">
</span><span id="1-2"><span class="kn">import</span> <span class="nn">os</span>
</span><span id="1-3"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span id="1-4"><span class="kn">import</span> <span class="nn">scipy.sparse</span> <span class="k">as</span> <span class="nn">sp</span>
</span><span id="1-5"><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
</span><span id="1-6"><span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm</span>
</span><span id="1-7">
</span><span id="1-8">
<div class="viewcode-block" id="SignedTriadFeaExtra"><a class="viewcode-back" href="../../api.html#sign_lens.utils.SignedTriadFeaExtra">[docs]</a></span><span id="1-9"><span class="k">class</span> <span class="nc">SignedTriadFeaExtra</span><span class="p">:</span>
</span><span id="1-10">
</span><span id="1-11">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edgelist_fpath</span><span class="p">,</span> <span class="n">undirected</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">seperator</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">):</span>
</span><span id="1-12">        <span class="bp">self</span><span class="o">.</span><span class="n">undirected</span> <span class="o">=</span> <span class="n">undirected</span>
</span><span id="1-13">        <span class="bp">self</span><span class="o">.</span><span class="n">seperator</span> <span class="o">=</span> <span class="n">seperator</span>
</span><span id="1-14">
</span><span id="1-15">        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">init_edgelists</span><span class="p">(</span><span class="n">edgelist_fpath</span><span class="p">)</span>
</span><span id="1-16">        <span class="bp">self</span><span class="o">.</span><span class="n">pos_in_edgelists</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_out_edgelists</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_in_edgelists</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_out_edgelists</span> <span class="o">=</span> <span class="n">res</span>
</span><span id="1-17">
</span><span id="1-18">    <span class="k">def</span> <span class="nf">init_edgelists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edgelist_fpath</span><span class="p">):</span>
</span><span id="1-19">        <span class="n">pos_out_edgelists</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
</span><span id="1-20">        <span class="n">neg_out_edgelists</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
</span><span id="1-21">        <span class="n">pos_in_edgelists</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
</span><span id="1-22">        <span class="n">neg_in_edgelists</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
</span><span id="1-23">        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">edgelist_fpath</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="1-24">            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
</span><span id="1-25">                <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">seperator</span><span class="p">)</span>
</span><span id="1-26">                <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="1-27">                <span class="n">y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</span><span id="1-28">                <span class="n">z</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
</span><span id="1-29">                <span class="k">if</span> <span class="n">z</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="1-30">                    <span class="n">pos_out_edgelists</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</span><span id="1-31">                    <span class="n">pos_in_edgelists</span><span class="p">[</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="1-32">                <span class="k">else</span><span class="p">:</span>
</span><span id="1-33">                    <span class="n">neg_out_edgelists</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</span><span id="1-34">                    <span class="n">neg_in_edgelists</span><span class="p">[</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="1-35">
</span><span id="1-36">                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">undirected</span><span class="p">:</span>
</span><span id="1-37">                    <span class="c1"># if undireced, repeat it</span>
</span><span id="1-38">                    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span>
</span><span id="1-39">                    <span class="k">if</span> <span class="n">z</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="1-40">                        <span class="n">pos_out_edgelists</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</span><span id="1-41">                        <span class="n">pos_in_edgelists</span><span class="p">[</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="1-42">                    <span class="k">else</span><span class="p">:</span>
</span><span id="1-43">                        <span class="n">neg_out_edgelists</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</span><span id="1-44">                        <span class="n">neg_in_edgelists</span><span class="p">[</span><span class="n">y</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="1-45">
</span><span id="1-46">        <span class="k">return</span> <span class="n">pos_in_edgelists</span><span class="p">,</span> <span class="n">pos_out_edgelists</span><span class="p">,</span> <span class="n">neg_in_edgelists</span><span class="p">,</span> <span class="n">neg_out_edgelists</span>
</span><span id="1-47">
</span><span id="1-48">    <span class="k">def</span> <span class="nf">get_pos_indegree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
</span><span id="1-49">        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_in_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">])</span>
</span><span id="1-50">
</span><span id="1-51">    <span class="k">def</span> <span class="nf">get_pos_outdegree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
</span><span id="1-52">        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_out_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">])</span>
</span><span id="1-53">
</span><span id="1-54">    <span class="k">def</span> <span class="nf">get_neg_indegree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
</span><span id="1-55">        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">neg_in_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">])</span>
</span><span id="1-56">
</span><span id="1-57">    <span class="k">def</span> <span class="nf">get_neg_outdegree</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
</span><span id="1-58">        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">neg_out_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">])</span>
</span><span id="1-59">
</span><span id="1-60">    <span class="k">def</span> <span class="nf">common_neighbors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
</span><span id="1-61">        <span class="n">u_neighbors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_in_edgelists</span><span class="p">[</span><span class="n">u</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_in_edgelists</span><span class="p">[</span><span class="n">u</span><span class="p">]</span> <span class="o">+</span> \
</span><span id="1-62">            <span class="bp">self</span><span class="o">.</span><span class="n">pos_out_edgelists</span><span class="p">[</span><span class="n">u</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_out_edgelists</span><span class="p">[</span><span class="n">u</span><span class="p">]</span>
</span><span id="1-63">        <span class="n">v_neighbors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_in_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_in_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">+</span> \
</span><span id="1-64">            <span class="bp">self</span><span class="o">.</span><span class="n">pos_out_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_out_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">]</span>
</span><span id="1-65">        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">u_neighbors</span><span class="p">)</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">v_neighbors</span><span class="p">)))</span>
</span><span id="1-66">
<div class="viewcode-block" id="SignedTriadFeaExtra.extract_triad_counts"><a class="viewcode-back" href="../../api.html#sign_lens.utils.SignedTriadFeaExtra.extract_triad_counts">[docs]</a></span><span id="1-67">    <span class="k">def</span> <span class="nf">extract_triad_counts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">:</span>
</span><span id="1-68"><span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="1-69">
</span><span id="1-70"><span class="sd">        .. math::</span>
</span><span id="1-71">
</span><span id="1-72"><span class="sd">            A \times B \alpha</span>
</span><span id="1-73">
</span><span id="1-74">
</span><span id="1-75"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="1-76">        <span class="n">d1_1</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_out_edgelists</span><span class="p">[</span><span class="n">u</span><span class="p">])</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_in_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">])))</span>
</span><span id="1-77">        <span class="n">d1_2</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_out_edgelists</span><span class="p">[</span><span class="n">u</span><span class="p">])</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">neg_in_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">])))</span>
</span><span id="1-78">        <span class="n">d1_3</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">neg_out_edgelists</span><span class="p">[</span><span class="n">u</span><span class="p">])</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_in_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">])))</span>
</span><span id="1-79">        <span class="n">d1_4</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">neg_out_edgelists</span><span class="p">[</span><span class="n">u</span><span class="p">])</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">neg_in_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">])))</span>
</span><span id="1-80">
</span><span id="1-81">        <span class="n">d2_1</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_out_edgelists</span><span class="p">[</span><span class="n">u</span><span class="p">])</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_out_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">])))</span>
</span><span id="1-82">        <span class="n">d2_2</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_out_edgelists</span><span class="p">[</span><span class="n">u</span><span class="p">])</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">neg_out_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">])))</span>
</span><span id="1-83">        <span class="n">d2_3</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">neg_out_edgelists</span><span class="p">[</span><span class="n">u</span><span class="p">])</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_out_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">])))</span>
</span><span id="1-84">        <span class="n">d2_4</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">neg_out_edgelists</span><span class="p">[</span><span class="n">u</span><span class="p">])</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">neg_out_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">])))</span>
</span><span id="1-85">
</span><span id="1-86">        <span class="n">d3_1</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_in_edgelists</span><span class="p">[</span><span class="n">u</span><span class="p">])</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_out_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">])))</span>
</span><span id="1-87">        <span class="n">d3_2</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_in_edgelists</span><span class="p">[</span><span class="n">u</span><span class="p">])</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">neg_out_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">])))</span>
</span><span id="1-88">        <span class="n">d3_3</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">neg_in_edgelists</span><span class="p">[</span><span class="n">u</span><span class="p">])</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_out_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">])))</span>
</span><span id="1-89">        <span class="n">d3_4</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">neg_in_edgelists</span><span class="p">[</span><span class="n">u</span><span class="p">])</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">neg_out_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">])))</span>
</span><span id="1-90">
</span><span id="1-91">        <span class="n">d4_1</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_in_edgelists</span><span class="p">[</span><span class="n">u</span><span class="p">])</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_in_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">])))</span>
</span><span id="1-92">        <span class="n">d4_2</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_in_edgelists</span><span class="p">[</span><span class="n">u</span><span class="p">])</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">neg_in_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">])))</span>
</span><span id="1-93">        <span class="n">d4_3</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">neg_in_edgelists</span><span class="p">[</span><span class="n">u</span><span class="p">])</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_in_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">])))</span>
</span><span id="1-94">        <span class="n">d4_4</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">neg_in_edgelists</span><span class="p">[</span><span class="n">u</span><span class="p">])</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">neg_in_edgelists</span><span class="p">[</span><span class="n">v</span><span class="p">])))</span>
</span><span id="1-95">
</span><span id="1-96">        <span class="k">return</span> <span class="n">d1_1</span><span class="p">,</span> <span class="n">d1_2</span><span class="p">,</span> <span class="n">d1_3</span><span class="p">,</span> <span class="n">d1_4</span><span class="p">,</span> <span class="n">d2_1</span><span class="p">,</span> <span class="n">d2_2</span><span class="p">,</span> <span class="n">d2_3</span><span class="p">,</span> <span class="n">d2_4</span><span class="p">,</span> <span class="n">d3_1</span><span class="p">,</span> <span class="n">d3_2</span><span class="p">,</span> <span class="n">d3_3</span><span class="p">,</span> <span class="n">d3_4</span><span class="p">,</span> <span class="n">d4_1</span><span class="p">,</span> <span class="n">d4_2</span><span class="p">,</span> <span class="n">d4_3</span><span class="p">,</span> <span class="n">d4_4</span></div>
</span><span id="1-97">
</span><span id="1-98">    <span class="k">def</span> <span class="nf">calc_balance_triads_num</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="1-99">        <span class="n">s0</span><span class="p">,</span> <span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">s3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calc_balance_and_status_triads_num</span><span class="p">()</span>
</span><span id="1-100">        <span class="k">return</span> <span class="n">s1</span> <span class="o">+</span> <span class="n">s2</span><span class="p">,</span> <span class="n">s0</span>
</span><span id="1-101">
</span><span id="1-102">    <span class="k">def</span> <span class="nf">calc_balance_triads_dist</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="1-103">        <span class="n">t1</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># +++</span>
</span><span id="1-104">        <span class="n">t2</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># ++-</span>
</span><span id="1-105">        <span class="n">t3</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># +--</span>
</span><span id="1-106">        <span class="n">t4</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># ---</span>
</span><span id="1-107">        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_out_edgelists</span><span class="p">):</span>
</span><span id="1-108">            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_out_edgelists</span><span class="p">[</span><span class="n">x</span><span class="p">]:</span>
</span><span id="1-109">                <span class="n">mask1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>  <span class="c1"># +++</span>
</span><span id="1-110">                <span class="n">mask2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>  <span class="c1"># ++-</span>
</span><span id="1-111">                <span class="n">mask3</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>  <span class="c1"># +--</span>
</span><span id="1-112">                <span class="n">mask4</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>  <span class="c1"># ---</span>
</span><span id="1-113">                <span class="n">rs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_triad_counts</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span><span id="1-114">                <span class="n">t1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">mask1</span><span class="p">,</span> <span class="n">rs</span><span class="p">))</span>
</span><span id="1-115">                <span class="n">t2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">mask2</span><span class="p">,</span> <span class="n">rs</span><span class="p">))</span>
</span><span id="1-116">                <span class="n">t3</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">mask3</span><span class="p">,</span> <span class="n">rs</span><span class="p">))</span>
</span><span id="1-117">                <span class="n">t4</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">mask4</span><span class="p">,</span> <span class="n">rs</span><span class="p">))</span>
</span><span id="1-118">
</span><span id="1-119">        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">neg_out_edgelists</span><span class="p">):</span>
</span><span id="1-120">            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_out_edgelists</span><span class="p">[</span><span class="n">x</span><span class="p">]:</span>
</span><span id="1-121">                <span class="n">mask1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>  <span class="c1"># +++</span>
</span><span id="1-122">                <span class="n">mask2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>  <span class="c1"># ++-</span>
</span><span id="1-123">                <span class="n">mask3</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>  <span class="c1"># +--</span>
</span><span id="1-124">                <span class="n">mask4</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>  <span class="c1"># ---</span>
</span><span id="1-125">                <span class="n">rs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_triad_counts</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span><span id="1-126">                <span class="n">t1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">mask1</span><span class="p">,</span> <span class="n">rs</span><span class="p">))</span>
</span><span id="1-127">                <span class="n">t2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">mask2</span><span class="p">,</span> <span class="n">rs</span><span class="p">))</span>
</span><span id="1-128">                <span class="n">t3</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">mask3</span><span class="p">,</span> <span class="n">rs</span><span class="p">))</span>
</span><span id="1-129">                <span class="n">t4</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">mask4</span><span class="p">,</span> <span class="n">rs</span><span class="p">))</span>
</span><span id="1-130">
</span><span id="1-131">        <span class="n">s1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">t1</span><span class="p">)</span>
</span><span id="1-132">        <span class="n">s2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">t2</span><span class="p">)</span>
</span><span id="1-133">        <span class="n">s3</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">t3</span><span class="p">)</span>
</span><span id="1-134">        <span class="n">s4</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">t4</span><span class="p">)</span>
</span><span id="1-135">        <span class="n">res</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">s3</span><span class="p">,</span> <span class="n">s4</span><span class="p">])</span>
</span><span id="1-136">
</span><span id="1-137">        <span class="k">return</span> <span class="n">res</span> <span class="o">/</span> <span class="n">res</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</span><span id="1-138">
</span><span id="1-139">    <span class="k">def</span> <span class="nf">calc_balance_and_status_triads_num</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="1-140">        <span class="n">rs0</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="1-141">        <span class="n">rs1</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="1-142">        <span class="n">rs2</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="1-143">        <span class="n">rs3</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="1-144">        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_out_edgelists</span><span class="p">):</span>
</span><span id="1-145">            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_out_edgelists</span><span class="p">[</span><span class="n">x</span><span class="p">]:</span>
</span><span id="1-146">                <span class="n">mask1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>  <span class="c1"># both satify</span>
</span><span id="1-147">                <span class="n">mask2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>  <span class="c1"># only balance</span>
</span><span id="1-148">                <span class="n">mask3</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>  <span class="c1"># only status</span>
</span><span id="1-149">                <span class="n">rs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_triad_counts</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span><span id="1-150">                <span class="n">rs0</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rs</span><span class="p">)</span>
</span><span id="1-151">                <span class="n">rs1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">mask1</span><span class="p">,</span> <span class="n">rs</span><span class="p">))</span>
</span><span id="1-152">                <span class="n">rs2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">mask2</span><span class="p">,</span> <span class="n">rs</span><span class="p">))</span>
</span><span id="1-153">                <span class="n">rs3</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">mask3</span><span class="p">,</span> <span class="n">rs</span><span class="p">))</span>
</span><span id="1-154">
</span><span id="1-155">        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">neg_out_edgelists</span><span class="p">):</span>
</span><span id="1-156">            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_out_edgelists</span><span class="p">[</span><span class="n">x</span><span class="p">]:</span>
</span><span id="1-157">                <span class="n">mask1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="1-158">                <span class="n">mask2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="1-159">                <span class="n">mask3</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</span><span id="1-160">                <span class="n">rs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_triad_counts</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span><span id="1-161">                <span class="n">rs0</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rs</span><span class="p">)</span>
</span><span id="1-162">                <span class="n">rs1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">mask1</span><span class="p">,</span> <span class="n">rs</span><span class="p">))</span>
</span><span id="1-163">                <span class="n">rs2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">mask2</span><span class="p">,</span> <span class="n">rs</span><span class="p">))</span>
</span><span id="1-164">                <span class="n">rs3</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">mask3</span><span class="p">,</span> <span class="n">rs</span><span class="p">))</span>
</span><span id="1-165">
</span><span id="1-166">        <span class="n">s0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">rs0</span><span class="p">)</span>
</span><span id="1-167">        <span class="n">s1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">rs1</span><span class="p">)</span>
</span><span id="1-168">        <span class="n">s2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">rs2</span><span class="p">)</span>
</span><span id="1-169">        <span class="n">s3</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">rs3</span><span class="p">)</span>
</span><span id="1-170">        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;all triangle&#39;</span><span class="p">,</span> <span class="n">s0</span><span class="p">)</span>
</span><span id="1-171">        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">s1</span><span class="p">,</span> <span class="n">s1</span> <span class="o">/</span> <span class="n">s0</span><span class="p">)</span>
</span><span id="1-172">        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;balance&#39;</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">s2</span> <span class="o">/</span> <span class="n">s0</span><span class="p">)</span>
</span><span id="1-173">        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="n">s3</span><span class="p">,</span> <span class="n">s3</span> <span class="o">/</span> <span class="n">s0</span><span class="p">)</span>
</span><span id="1-174">        <span class="k">return</span> <span class="n">s0</span><span class="p">,</span> <span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">s3</span></div>
</span><span id="1-175">
</span><span id="1-176">
</span><span id="1-177"><span class="k">class</span> <span class="nc">SignedTriadFeaExtraByMatrace</span><span class="p">:</span>
</span><span id="1-178">
</span><span id="1-179">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edgelist_fpath</span><span class="p">,</span> <span class="n">undirected</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">seperator</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">):</span>
</span><span id="1-180">        <span class="bp">self</span><span class="o">.</span><span class="n">undirected</span> <span class="o">=</span> <span class="n">undirected</span>
</span><span id="1-181">        <span class="bp">self</span><span class="o">.</span><span class="n">seperator</span> <span class="o">=</span> <span class="n">seperator</span>
</span><span id="1-182">        <span class="bp">self</span><span class="o">.</span><span class="n">init_matrice</span><span class="p">(</span><span class="n">edgelist_fpath</span><span class="p">)</span>
</span><span id="1-183">
</span><span id="1-184">    <span class="k">def</span> <span class="nf">init_matrice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edgelist_fpath</span><span class="p">):</span>
</span><span id="1-185">        <span class="n">pos_edgelist</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="1-186">        <span class="n">neg_edgelist</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="1-187">        <span class="n">node_set</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="1-188">        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">edgelist_fpath</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="1-189">            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
</span><span id="1-190">                <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">seperator</span><span class="p">)</span>
</span><span id="1-191">                <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">node_set</span><span class="p">:</span>
</span><span id="1-192">                    <span class="n">node_set</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">node_set</span><span class="p">)</span>
</span><span id="1-193">                <span class="k">if</span> <span class="n">y</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">node_set</span><span class="p">:</span>
</span><span id="1-194">                    <span class="n">node_set</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">node_set</span><span class="p">)</span>
</span><span id="1-195">
</span><span id="1-196">                <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="1-197">                <span class="n">y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</span><span id="1-198">                <span class="n">z</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
</span><span id="1-199">                <span class="k">if</span> <span class="n">z</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="1-200">                    <span class="n">pos_edgelist</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
</span><span id="1-201">                <span class="k">else</span><span class="p">:</span>
</span><span id="1-202">                    <span class="n">neg_edgelist</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
</span><span id="1-203">
</span><span id="1-204">        <span class="n">node_num</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">node_set</span><span class="p">)</span>
</span><span id="1-205">
</span><span id="1-206">        <span class="n">pos_edge_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">pos_edgelist</span><span class="p">)</span>
</span><span id="1-207">        <span class="n">neg_edge_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">neg_edgelist</span><span class="p">)</span>
</span><span id="1-208">
</span><span id="1-209">        <span class="n">row</span> <span class="o">=</span> <span class="n">pos_edge_array</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="1-210">        <span class="n">col</span> <span class="o">=</span> <span class="n">pos_edge_array</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
</span><span id="1-211">        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones_like</span><span class="p">(</span><span class="n">pos_edge_array</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
</span><span id="1-212">        <span class="bp">self</span><span class="o">.</span><span class="n">pos_mat</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">coo_matrix</span><span class="p">((</span><span class="n">data</span><span class="p">,</span> <span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)),</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">node_num</span><span class="p">,</span> <span class="n">node_num</span><span class="p">))</span>
</span><span id="1-213">
</span><span id="1-214">        <span class="n">row</span> <span class="o">=</span> <span class="n">neg_edge_array</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="1-215">        <span class="n">col</span> <span class="o">=</span> <span class="n">neg_edge_array</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
</span><span id="1-216">        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones_like</span><span class="p">(</span><span class="n">neg_edge_array</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
</span><span id="1-217">        <span class="bp">self</span><span class="o">.</span><span class="n">neg_mat</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">coo_matrix</span><span class="p">((</span><span class="n">data</span><span class="p">,</span> <span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)),</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">node_num</span><span class="p">,</span> <span class="n">node_num</span><span class="p">))</span>
</span><span id="1-218">
</span><span id="1-219">    <span class="k">def</span> <span class="nf">calc_balance_and_status_triads_num</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="1-220"><span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="1-221"><span class="sd">        calc_balance_and_status_triads_num </span>
</span><span id="1-222"><span class="sd">        .. math::</span>
</span><span id="1-223">
</span><span id="1-224"><span class="sd">            {A_1^+} \cdot {A_1^+} \odot (1 - I)\odot {A_1^+} </span>
</span><span id="1-225">
</span><span id="1-226">
</span><span id="1-227"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="1-228">        <span class="n">A_plus</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_mat</span>
</span><span id="1-229">        <span class="n">A_minus</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_mat</span>
</span><span id="1-230">        <span class="n">ts</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="1-231">            <span class="p">[(</span><span class="n">A_plus</span><span class="p">,</span> <span class="n">A_plus</span><span class="p">),</span> <span class="p">(</span><span class="n">A_plus</span><span class="p">,</span> <span class="n">A_minus</span><span class="p">),</span> <span class="p">(</span><span class="n">A_minus</span><span class="p">,</span> <span class="n">A_plus</span><span class="p">),</span> <span class="p">(</span><span class="n">A_minus</span><span class="p">,</span> <span class="n">A_minus</span><span class="p">)],</span>
</span><span id="1-232">            <span class="p">[(</span><span class="n">A_plus</span><span class="p">,</span> <span class="n">A_plus</span><span class="o">.</span><span class="n">T</span><span class="p">),</span> <span class="p">(</span><span class="n">A_plus</span><span class="p">,</span> <span class="n">A_minus</span><span class="o">.</span><span class="n">T</span><span class="p">),</span> <span class="p">(</span><span class="n">A_minus</span><span class="p">,</span> <span class="n">A_plus</span><span class="o">.</span><span class="n">T</span><span class="p">),</span> <span class="p">(</span><span class="n">A_minus</span><span class="p">,</span> <span class="n">A_minus</span><span class="o">.</span><span class="n">T</span><span class="p">)],</span>
</span><span id="1-233">            <span class="p">[(</span><span class="n">A_plus</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">A_plus</span><span class="o">.</span><span class="n">T</span><span class="p">),</span> <span class="p">(</span><span class="n">A_plus</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">A_minus</span><span class="o">.</span><span class="n">T</span><span class="p">),</span> <span class="p">(</span><span class="n">A_minus</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">A_plus</span><span class="o">.</span><span class="n">T</span><span class="p">),</span> <span class="p">(</span><span class="n">A_minus</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">A_minus</span><span class="o">.</span><span class="n">T</span><span class="p">)],</span>
</span><span id="1-234">            <span class="p">[(</span><span class="n">A_plus</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">A_plus</span><span class="p">),</span> <span class="p">(</span><span class="n">A_plus</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">A_minus</span><span class="p">),</span> <span class="p">(</span><span class="n">A_minus</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">A_plus</span><span class="p">),</span> <span class="p">(</span><span class="n">A_minus</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">A_minus</span><span class="p">)],</span>
</span><span id="1-235">        <span class="p">]</span>
</span><span id="1-236">
</span><span id="1-237">        <span class="n">rs0</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="1-238">        <span class="n">rs1</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="1-239">        <span class="n">rs2</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="1-240">        <span class="n">rs3</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="1-241">        <span class="c1"># pos</span>
</span><span id="1-242">        <span class="n">rs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="1-243">        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">ts</span><span class="p">:</span>
</span><span id="1-244">            <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">t</span><span class="p">:</span>
</span><span id="1-245">                <span class="n">res</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</span><span id="1-246">                <span class="n">res</span><span class="o">.</span><span class="n">setdiag</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="1-247">                <span class="n">res</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">A_plus</span><span class="p">)</span>
</span><span id="1-248">                <span class="n">rs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
</span><span id="1-249">        <span class="n">mask1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>  <span class="c1"># both satify</span>
</span><span id="1-250">        <span class="n">mask2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>  <span class="c1"># only balance</span>
</span><span id="1-251">        <span class="n">mask3</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>  <span class="c1"># only status</span>
</span><span id="1-252">        <span class="n">rs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">rs</span><span class="p">)</span>
</span><span id="1-253">        <span class="n">rs0</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rs</span><span class="p">)</span>
</span><span id="1-254">        <span class="n">rs1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">mask1</span><span class="p">,</span> <span class="n">rs</span><span class="p">))</span>
</span><span id="1-255">        <span class="n">rs2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">mask2</span><span class="p">,</span> <span class="n">rs</span><span class="p">))</span>
</span><span id="1-256">        <span class="n">rs3</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">mask3</span><span class="p">,</span> <span class="n">rs</span><span class="p">))</span>
</span><span id="1-257">
</span><span id="1-258">        <span class="n">rs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="1-259">        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">ts</span><span class="p">:</span>
</span><span id="1-260">            <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">t</span><span class="p">:</span>
</span><span id="1-261">                <span class="n">res</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</span><span id="1-262">                <span class="n">res</span><span class="o">.</span><span class="n">setdiag</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="1-263">                <span class="n">res</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">A_minus</span><span class="p">)</span>
</span><span id="1-264">                <span class="n">rs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
</span><span id="1-265">        <span class="n">mask1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="1-266">        <span class="n">mask2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="1-267">        <span class="n">mask3</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</span><span id="1-268">
</span><span id="1-269">        <span class="n">rs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">rs</span><span class="p">)</span>
</span><span id="1-270">        <span class="n">rs0</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rs</span><span class="p">)</span>
</span><span id="1-271">        <span class="n">rs1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">mask1</span><span class="p">,</span> <span class="n">rs</span><span class="p">))</span>
</span><span id="1-272">        <span class="n">rs2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">mask2</span><span class="p">,</span> <span class="n">rs</span><span class="p">))</span>
</span><span id="1-273">        <span class="n">rs3</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">mask3</span><span class="p">,</span> <span class="n">rs</span><span class="p">))</span>
</span><span id="1-274">
</span><span id="1-275">        <span class="n">s0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">rs0</span><span class="p">)</span>
</span><span id="1-276">        <span class="n">s1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">rs1</span><span class="p">)</span>
</span><span id="1-277">        <span class="n">s2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">rs2</span><span class="p">)</span>
</span><span id="1-278">        <span class="n">s3</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">rs3</span><span class="p">)</span>
</span><span id="1-279">
</span><span id="1-280">        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;all triangle&#39;</span><span class="p">,</span> <span class="n">s0</span><span class="p">)</span>
</span><span id="1-281">        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">s1</span><span class="p">,</span> <span class="n">s1</span> <span class="o">/</span> <span class="n">s0</span><span class="p">)</span>
</span><span id="1-282">        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;balance&#39;</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">s2</span> <span class="o">/</span> <span class="n">s0</span><span class="p">)</span>
</span><span id="1-283">        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="n">s3</span><span class="p">,</span> <span class="n">s3</span> <span class="o">/</span> <span class="n">s0</span><span class="p">)</span>
</span><span id="1-284">        <span class="k">return</span> <span class="n">s0</span><span class="p">,</span> <span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">,</span> <span class="n">s3</span>
</span><span id="1-285">
</span><span id="1-286">
</span><span id="1-287"><span class="k">class</span> <span class="nc">SignedBipartiteFeaExtra</span><span class="p">:</span>
</span><span id="1-288">
</span><span id="1-289">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edgelist_fpath</span><span class="p">,</span> <span class="n">seperator</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="1-290">        <span class="bp">self</span><span class="o">.</span><span class="n">edgelist_fpath</span> <span class="o">=</span> <span class="n">edgelist_fpath</span>
</span><span id="1-291">        <span class="bp">self</span><span class="o">.</span><span class="n">seperator</span> <span class="o">=</span> <span class="n">seperator</span>
</span><span id="1-292">        <span class="bp">self</span><span class="o">.</span><span class="n">init_edgelists</span><span class="p">()</span>
</span><span id="1-293">
</span><span id="1-294">    <span class="k">def</span> <span class="nf">init_edgelists</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="1-295">        <span class="bp">self</span><span class="o">.</span><span class="n">pos_a_b</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">set</span><span class="p">)</span>
</span><span id="1-296">        <span class="bp">self</span><span class="o">.</span><span class="n">pos_b_a</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">set</span><span class="p">)</span>
</span><span id="1-297">        <span class="bp">self</span><span class="o">.</span><span class="n">neg_a_b</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">set</span><span class="p">)</span>
</span><span id="1-298">        <span class="bp">self</span><span class="o">.</span><span class="n">neg_b_a</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">set</span><span class="p">)</span>
</span><span id="1-299">
</span><span id="1-300">        <span class="n">edges</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="1-301">        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">edgelist_fpath</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="1-302">            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
</span><span id="1-303">                <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">seperator</span><span class="p">))</span>
</span><span id="1-304">                <span class="n">edges</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">s</span><span class="p">))</span>
</span><span id="1-305">                <span class="k">if</span> <span class="n">s</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="1-306">                    <span class="bp">self</span><span class="o">.</span><span class="n">pos_a_b</span><span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</span><span id="1-307">                    <span class="bp">self</span><span class="o">.</span><span class="n">pos_b_a</span><span class="p">[</span><span class="n">b</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</span><span id="1-308">                <span class="k">else</span><span class="p">:</span>
</span><span id="1-309">                    <span class="bp">self</span><span class="o">.</span><span class="n">neg_a_b</span><span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</span><span id="1-310">                    <span class="bp">self</span><span class="o">.</span><span class="n">neg_b_a</span><span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</span><span id="1-311">        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">edges</span><span class="p">)</span>
</span><span id="1-312">
</span><span id="1-313">    <span class="k">def</span> <span class="nf">count_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a_b_1</span><span class="p">,</span> <span class="n">a_b_2</span><span class="p">,</span> <span class="n">a_b_3</span><span class="p">,</span> <span class="n">a_b_4</span><span class="p">,</span> <span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">):</span>
</span><span id="1-314">        <span class="n">b1</span> <span class="o">=</span> <span class="n">a_b_1</span><span class="p">[</span><span class="n">a1</span><span class="p">]</span>
</span><span id="1-315">        <span class="n">b2</span> <span class="o">=</span> <span class="n">a_b_2</span><span class="p">[</span><span class="n">a1</span><span class="p">]</span>
</span><span id="1-316">        <span class="n">b3</span> <span class="o">=</span> <span class="n">a_b_3</span><span class="p">[</span><span class="n">a2</span><span class="p">]</span>
</span><span id="1-317">        <span class="n">b4</span> <span class="o">=</span> <span class="n">a_b_4</span><span class="p">[</span><span class="n">a2</span><span class="p">]</span>
</span><span id="1-318">        <span class="n">aa</span> <span class="o">=</span> <span class="n">b1</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">b3</span><span class="p">)</span>
</span><span id="1-319">        <span class="n">bb</span> <span class="o">=</span> <span class="n">b2</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">b4</span><span class="p">)</span>
</span><span id="1-320">        <span class="n">cnt1</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">aa</span><span class="p">)</span>
</span><span id="1-321">        <span class="n">cnt2</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">bb</span><span class="p">)</span>
</span><span id="1-322">        <span class="k">return</span> <span class="n">cnt1</span> <span class="o">*</span> <span class="n">cnt2</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">aa</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">bb</span><span class="p">))</span>
</span><span id="1-323">
</span><span id="1-324">    <span class="k">def</span> <span class="nf">calc_signed_bipartite_butterfly_dist</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="1-325">
</span><span id="1-326">        <span class="n">a_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">])</span>
</span><span id="1-327">        <span class="n">mapper</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;++++&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;----&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;++--&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;+-+-&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;+--+&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;+---&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;+++-&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
</span><span id="1-328">
</span><span id="1-329">        <span class="k">for</span> <span class="n">a1</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">a_set</span><span class="p">):</span>
</span><span id="1-330">            <span class="k">for</span> <span class="n">a2</span> <span class="ow">in</span> <span class="n">a_set</span><span class="p">:</span>
</span><span id="1-331">                <span class="k">if</span> <span class="n">a1</span> <span class="o">==</span> <span class="n">a2</span><span class="p">:</span>
</span><span id="1-332">                    <span class="k">continue</span>
</span><span id="1-333">                <span class="n">mapper</span><span class="p">[</span><span class="s1">&#39;++++&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_values</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_a_b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_a_b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_a_b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_a_b</span><span class="p">,</span> <span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">)</span>
</span><span id="1-334">                <span class="n">mapper</span><span class="p">[</span><span class="s1">&#39;++--&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_values</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_a_b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_a_b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_a_b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_a_b</span><span class="p">,</span> <span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">)</span>
</span><span id="1-335">                <span class="n">mapper</span><span class="p">[</span><span class="s1">&#39;+++-&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_values</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_a_b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_a_b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_a_b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_a_b</span><span class="p">,</span> <span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">)</span>
</span><span id="1-336">                <span class="n">mapper</span><span class="p">[</span><span class="s1">&#39;+---&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_values</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_a_b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_a_b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_a_b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_a_b</span><span class="p">,</span> <span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">)</span>
</span><span id="1-337">                <span class="n">mapper</span><span class="p">[</span><span class="s1">&#39;+-+-&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_values</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_a_b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_a_b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_a_b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_a_b</span><span class="p">,</span> <span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">)</span>
</span><span id="1-338">                <span class="n">mapper</span><span class="p">[</span><span class="s1">&#39;+--+&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_values</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_a_b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_a_b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_a_b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_a_b</span><span class="p">,</span> <span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">)</span>
</span><span id="1-339">                <span class="n">mapper</span><span class="p">[</span><span class="s1">&#39;----&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">count_values</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">neg_a_b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_a_b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_a_b</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_a_b</span><span class="p">,</span> <span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">)</span>
</span><span id="1-340">
</span><span id="1-341">        <span class="n">sum_s</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">mapper</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="1-342">        <span class="n">res_sign</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="1-343">            <span class="s1">&#39;++++&#39;</span><span class="p">,</span>
</span><span id="1-344">            <span class="s1">&#39;+--+&#39;</span><span class="p">,</span>
</span><span id="1-345">            <span class="s1">&#39;++--&#39;</span><span class="p">,</span>
</span><span id="1-346">            <span class="s1">&#39;+-+-&#39;</span><span class="p">,</span>
</span><span id="1-347">            <span class="s1">&#39;----&#39;</span><span class="p">,</span>
</span><span id="1-348">            <span class="s1">&#39;+++-&#39;</span><span class="p">,</span>
</span><span id="1-349">            <span class="s1">&#39;+---&#39;</span>
</span><span id="1-350">        <span class="p">]</span>
</span><span id="1-351">        <span class="k">return</span> <span class="n">res_sign</span><span class="p">,</span> <span class="p">[</span><span class="n">mapper</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="n">sum_s</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">res_sign</span><span class="p">]</span>
</span><span id="1-352">
</span><span id="1-353">
</span><span id="1-354"><span class="k">class</span> <span class="nc">SignedBipartiteFeaExtraByMatrace</span><span class="p">:</span>
</span><span id="1-355">
</span><span id="1-356">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edgelist_fpath</span><span class="p">,</span> <span class="n">seperator</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="1-357">        <span class="bp">self</span><span class="o">.</span><span class="n">edgelist_fpath</span> <span class="o">=</span> <span class="n">edgelist_fpath</span>
</span><span id="1-358">        <span class="bp">self</span><span class="o">.</span><span class="n">seperator</span> <span class="o">=</span> <span class="n">seperator</span>
</span><span id="1-359">        <span class="bp">self</span><span class="o">.</span><span class="n">init_matrice</span><span class="p">(</span><span class="n">edgelist_fpath</span><span class="p">)</span>
</span><span id="1-360">
</span><span id="1-361">    <span class="k">def</span> <span class="nf">init_matrice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edgelist_fpath</span><span class="p">):</span>
</span><span id="1-362">        <span class="n">pos_edgelist</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="1-363">        <span class="n">neg_edgelist</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="1-364">        <span class="n">node_set1</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="1-365">        <span class="n">node_set2</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="1-366">        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">edgelist_fpath</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="1-367">            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
</span><span id="1-368">                <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">seperator</span><span class="p">)</span>
</span><span id="1-369">                <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">node_set1</span><span class="p">:</span>
</span><span id="1-370">                    <span class="n">node_set1</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">node_set1</span><span class="p">)</span>
</span><span id="1-371">                <span class="k">if</span> <span class="n">y</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">node_set2</span><span class="p">:</span>
</span><span id="1-372">                    <span class="n">node_set2</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">node_set2</span><span class="p">)</span>
</span><span id="1-373">
</span><span id="1-374">                <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="1-375">                <span class="n">y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</span><span id="1-376">                <span class="n">z</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
</span><span id="1-377">                <span class="k">if</span> <span class="n">z</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="1-378">                    <span class="n">pos_edgelist</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
</span><span id="1-379">                <span class="k">else</span><span class="p">:</span>
</span><span id="1-380">                    <span class="n">neg_edgelist</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
</span><span id="1-381">
</span><span id="1-382">        <span class="n">node_num1</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">node_set1</span><span class="p">)</span>
</span><span id="1-383">        <span class="n">node_num2</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">node_set2</span><span class="p">)</span>
</span><span id="1-384">
</span><span id="1-385">        <span class="n">pos_edge_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">pos_edgelist</span><span class="p">)</span>
</span><span id="1-386">        <span class="n">neg_edge_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">neg_edgelist</span><span class="p">)</span>
</span><span id="1-387">
</span><span id="1-388">        <span class="n">row</span> <span class="o">=</span> <span class="n">pos_edge_array</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="1-389">        <span class="n">col</span> <span class="o">=</span> <span class="n">pos_edge_array</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
</span><span id="1-390">        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones_like</span><span class="p">(</span><span class="n">pos_edge_array</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
</span><span id="1-391">        <span class="bp">self</span><span class="o">.</span><span class="n">pos_mat</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">coo_matrix</span><span class="p">((</span><span class="n">data</span><span class="p">,</span> <span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)),</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">node_num1</span><span class="p">,</span> <span class="n">node_num2</span><span class="p">))</span>
</span><span id="1-392">
</span><span id="1-393">        <span class="n">row</span> <span class="o">=</span> <span class="n">neg_edge_array</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="1-394">        <span class="n">col</span> <span class="o">=</span> <span class="n">neg_edge_array</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>
</span><span id="1-395">        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones_like</span><span class="p">(</span><span class="n">neg_edge_array</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
</span><span id="1-396">        <span class="bp">self</span><span class="o">.</span><span class="n">neg_mat</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">coo_matrix</span><span class="p">((</span><span class="n">data</span><span class="p">,</span> <span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)),</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">node_num1</span><span class="p">,</span> <span class="n">node_num2</span><span class="p">))</span>
</span><span id="1-397">
</span><span id="1-398">    <span class="k">def</span> <span class="nf">calc_signed_bipartite_butterfly_dist</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="1-399">
</span><span id="1-400">        <span class="n">mapper</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;++++&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;----&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;++--&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;+-+-&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;+--+&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;+---&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;+++-&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
</span><span id="1-401">        <span class="n">mapper_operataions</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="1-402">            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_mat</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_mat</span><span class="o">.</span><span class="n">T</span><span class="p">],</span>
</span><span id="1-403">            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">neg_mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_mat</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_mat</span><span class="o">.</span><span class="n">T</span><span class="p">],</span>
</span><span id="1-404">            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_mat</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_mat</span><span class="o">.</span><span class="n">T</span><span class="p">],</span>
</span><span id="1-405">            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_mat</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_mat</span><span class="o">.</span><span class="n">T</span><span class="p">],</span>
</span><span id="1-406">            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_mat</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_mat</span><span class="o">.</span><span class="n">T</span><span class="p">],</span>
</span><span id="1-407">            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_mat</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_mat</span><span class="o">.</span><span class="n">T</span><span class="p">],</span>
</span><span id="1-408">            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pos_mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_mat</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">neg_mat</span><span class="o">.</span><span class="n">T</span><span class="p">],</span>
</span><span id="1-409">        <span class="p">]</span>
</span><span id="1-410">        <span class="k">for</span> <span class="nb">map</span><span class="p">,</span> <span class="n">operation</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">mapper</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">mapper_operataions</span><span class="p">):</span>
</span><span id="1-411">            <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="n">operation</span>
</span><span id="1-412">            <span class="n">res</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</span><span id="1-413">            <span class="n">res</span><span class="o">.</span><span class="n">setdiag</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="1-414">            <span class="n">res</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</span><span id="1-415">            <span class="n">res</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</span><span id="1-416">            <span class="n">v</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">diagonal</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</span><span id="1-417">            <span class="n">mapper</span><span class="p">[</span><span class="nb">map</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
</span><span id="1-418">
</span><span id="1-419">        <span class="n">sum_s</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">mapper</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="1-420">        <span class="n">res_sign</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="1-421">            <span class="s1">&#39;++++&#39;</span><span class="p">,</span>
</span><span id="1-422">            <span class="s1">&#39;+--+&#39;</span><span class="p">,</span>
</span><span id="1-423">            <span class="s1">&#39;++--&#39;</span><span class="p">,</span>
</span><span id="1-424">            <span class="s1">&#39;+-+-&#39;</span><span class="p">,</span>
</span><span id="1-425">            <span class="s1">&#39;----&#39;</span><span class="p">,</span>
</span><span id="1-426">            <span class="s1">&#39;+++-&#39;</span><span class="p">,</span>
</span><span id="1-427">            <span class="s1">&#39;+---&#39;</span>
</span><span id="1-428">        <span class="p">]</span>
</span><span id="1-429">        <span class="k">return</span> <span class="n">res_sign</span><span class="p">,</span> <span class="p">[</span><span class="n">mapper</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">/</span><span class="n">sum_s</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">res_sign</span><span class="p">]</span>
</span><span id="1-430">
</span><span id="1-431">
</span><span id="1-432"><span class="k">class</span> <span class="nc">SignedPathFeaExtraByMatrace</span><span class="p">:</span>
</span><span id="1-433">     
</span><span id="1-434">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edgelist_fpath</span><span class="p">,</span> <span class="n">nodefea_fpath</span><span class="p">,</span> <span class="n">seperator</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="1-435">        <span class="bp">self</span><span class="o">.</span><span class="n">edgelist_fpath</span> <span class="o">=</span> <span class="n">edgelist_fpath</span>
</span><span id="1-436">        <span class="bp">self</span><span class="o">.</span><span class="n">nodefea_fpath</span>  <span class="o">=</span> <span class="n">nodefea_fpath</span>
</span><span id="1-437">        <span class="bp">self</span><span class="o">.</span><span class="n">seperator</span> <span class="o">=</span> <span class="n">seperator</span>
</span><span id="1-438">        <span class="bp">self</span><span class="o">.</span><span class="n">init_matrice</span><span class="p">(</span><span class="n">edgelist_fpath</span><span class="p">)</span>
</span><span id="1-439">
</span><span id="1-440">
</span><span id="1-441">    <span class="k">def</span> <span class="nf">init_matrice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edgelist_fpath</span><span class="p">):</span>
</span><span id="1-442">        <span class="n">pos_edgelist</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="1-443">        <span class="n">neg_edgelist</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="1-444">        <span class="n">node_set1</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="1-445">        <span class="n">node_set2</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="1-446">
</span><span id="1-447">
</span><span id="1-448">    <span class="k">def</span> <span class="nf">compute_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="1-449">        <span class="k">pass</span>
</span><span id="1-450">
</span><span id="1-451">
</span><span id="1-452">
</span><span id="1-453"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
</span><span id="1-454">    <span class="n">BASE_DIR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>
</span><span id="1-455">    <span class="n">test_fpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s1">&#39;..&#39;</span><span class="p">,</span> <span class="s1">&#39;tests&#39;</span><span class="p">,</span> <span class="s1">&#39;test_datas&#39;</span><span class="p">,</span> <span class="s1">&#39;simple_case.edgelist&#39;</span><span class="p">))</span>
</span><span id="1-456">    <span class="n">model</span> <span class="o">=</span> <span class="n">SignedTriadFeaExtra</span><span class="p">(</span><span class="n">edgelist_fpath</span><span class="o">=</span><span class="n">test_fpath</span><span class="p">)</span>
</span><span id="1-457">    <span class="n">model</span><span class="o">.</span><span class="n">calc_balance_and_status_triads_num</span><span class="p">()</span>
</span></pre></div>
        </article>
        
      </div>
      <div class="min-w-0 max-w-6xl px-6 pb-6 xl:pt-6 xl:px-12">
        <div class="navigation flex print:hidden">
  
  
</div>
        
      </div>
    </div>
  </main>
</div>
<footer class="sy-foot">
  <div class="sy-foot-inner sy-container mx-auto">
    
    <div class="sy-foot-reserved md:flex justify-between items-center">
      <div class="sy-foot-copyright"><p>2021, junjiehuang</p>
        
        <p>
          Made with
          
          <a href="https://www.sphinx-doc.org/">Sphinx</a> and
          
          <a href="https://shibuya.lepture.com">Shibuya theme</a>.
        </p>
      </div>
      <div class="sy-foot-socials">
      </div>
    </div>
  </div>
</footer></div>
      <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
      <script src="../../_static/doctools.js"></script>
      <script src="../../_static/sphinx_highlight.js"></script>
      <script src="../../_static/clipboard.min.js"></script>
      <script src="../../_static/copybutton.js"></script>
      <script src="../../_static/shibuya.js?v=2023.3.19"></script>
    
</body>
</html>